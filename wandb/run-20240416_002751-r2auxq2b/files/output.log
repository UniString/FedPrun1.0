CNNCifar(
  (conv1): Conv2d(3, 6, kernel_size=(5, 5), stride=(1, 1))
  (pool): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)
  (conv2): Conv2d(6, 16, kernel_size=(5, 5), stride=(1, 1))
  (fc1): Linear(in_features=400, out_features=120, bias=True)
  (fc2): Linear(in_features=120, out_features=84, bias=True)
  (fc3): Linear(in_features=84, out_features=10, bias=True)
)
0.995
********************************************************************************
Round   0
0.99
********************************************************************************
Round   1
聚合前
{'conv1.weight': 1.0, 'conv1.bias': 1, 'conv2.weight': 1.0, 'conv2.bias': 1, 'fc1.weight': 0.9959375, 'fc1.bias': 1, 'fc2.weight': 1.0, 'fc2.bias': 1, 'fc3.weight': 1.0, 'fc3.bias': 1}
聚合前
{'conv1.weight': 1.0, 'conv1.bias': 1, 'conv2.weight': 1.0, 'conv2.bias': 1, 'fc1.weight': 0.9969583333333333, 'fc1.bias': 1, 'fc2.weight': 1.0, 'fc2.bias': 1, 'fc3.weight': 1.0, 'fc3.bias': 1}
聚合前
{'conv1.weight': 1.0, 'conv1.bias': 1, 'conv2.weight': 1.0, 'conv2.bias': 1, 'fc1.weight': 0.9961666666666666, 'fc1.bias': 1, 'fc2.weight': 1.0, 'fc2.bias': 1, 'fc3.weight': 1.0, 'fc3.bias': 1}
聚合前
{'conv1.weight': 1.0, 'conv1.bias': 1, 'conv2.weight': 1.0, 'conv2.bias': 1, 'fc1.weight': 0.9955625, 'fc1.bias': 1, 'fc2.weight': 1.0, 'fc2.bias': 1, 'fc3.weight': 1.0, 'fc3.bias': 1}
聚合前
{'conv1.weight': 1.0, 'conv1.bias': 1, 'conv2.weight': 1.0, 'conv2.bias': 1, 'fc1.weight': 0.9958541666666667, 'fc1.bias': 1, 'fc2.weight': 1.0, 'fc2.bias': 1, 'fc3.weight': 1.0, 'fc3.bias': 1}
聚合前
{'conv1.weight': 1.0, 'conv1.bias': 1, 'conv2.weight': 1.0, 'conv2.bias': 1, 'fc1.weight': 0.9962291666666667, 'fc1.bias': 1, 'fc2.weight': 1.0, 'fc2.bias': 1, 'fc3.weight': 1.0, 'fc3.bias': 1}
聚合前
{'conv1.weight': 1.0, 'conv1.bias': 1, 'conv2.weight': 1.0, 'conv2.bias': 1, 'fc1.weight': 0.99625, 'fc1.bias': 1, 'fc2.weight': 1.0, 'fc2.bias': 1, 'fc3.weight': 1.0, 'fc3.bias': 1}
聚合前
{'conv1.weight': 1.0, 'conv1.bias': 1, 'conv2.weight': 1.0, 'conv2.bias': 1, 'fc1.weight': 0.9960416666666667, 'fc1.bias': 1, 'fc2.weight': 1.0, 'fc2.bias': 1, 'fc3.weight': 1.0, 'fc3.bias': 1}
聚合前
{'conv1.weight': 1.0, 'conv1.bias': 1, 'conv2.weight': 1.0, 'conv2.bias': 1, 'fc1.weight': 0.9955833333333334, 'fc1.bias': 1, 'fc2.weight': 1.0, 'fc2.bias': 1, 'fc3.weight': 1.0, 'fc3.bias': 1}
聚合前
{'conv1.weight': 1.0, 'conv1.bias': 1, 'conv2.weight': 1.0, 'conv2.bias': 1, 'fc1.weight': 0.9960833333333333, 'fc1.bias': 1, 'fc2.weight': 1.0, 'fc2.bias': 1, 'fc3.weight': 1.0, 'fc3.bias': 1}
Traceback (most recent call last):
  File "C:\Users\Matrix\Documents\Code\FedPrun1.0\main_fed.py", line 361, in <module>
    FedAvg(net_glob, dataset_train, dataset_test, dict_users)
  File "C:\Users\Matrix\Documents\Code\FedPrun1.0\main_fed.py", line 142, in FedAvg
    get_densitys(net_glob)
  File "C:\Users\Matrix\Documents\Code\FedPrun1.0\main_fed.py", line 34, in get_densitys
    total_size += weight.numel()
    ^^^^^^^^^^
UnboundLocalError: cannot access local variable 'total_size' where it is not associated with a value
Testing accuracy: 9.67
聚合后
conv1.weight density: 1.0